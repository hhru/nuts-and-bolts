-   name: 10.1.1
    date: '2024-12-26T16:25:51.439203+03:00'
    description: По-умолчанию всегда выставляем в nab-kafka `enable.auto.commit=false`
        для consumer. Значение может быть переопределено через конфиг сервиса.
    instructions: ''
    compatible: true

-   name: 10.1.0
    date: '2024-12-13T15:18:18.904335+03:00'
    description: "* Добавлена новая опция metrics.allowed, которая отвечает за перечень\
        \ собираемых метрик в добавок к критическим для мониторинга метрикам\r\n*\
        \ Добавлена новая опция metrics.send-all со значением false по умолчанию,\
        \ которая отвечает за включения сбора метрик без фильтрации с помощью metrics.allowed"
    instructions: ''
    compatible: true

-   name: 10.0.1
    date: '2024-12-12T14:25:33.737177+03:00'
    description: удалил резолв хоста для трейсинга
    instructions: ''
    compatible: true

-   name: 10.0.0
    date: '2024-12-11T18:43:26.760524+03:00'
    description: Удален TestExecutorListener
    instructions: Удалить из файла org.junit.platform.launcher.TestExecutionListener,
        который лежит в директории test/resources/META_INF/services, строчку 'ru.hh.nab.testbase.listeners.TestExecutorListener'.
        Если в данном файле больше не указаны никакие имплементации org.junit.platform.launcher.TestExecutionListener
        - необходимо удалить файл целиком
    compatible: false

-   name: 9.2.0
    date: '2024-12-09T18:53:22.730128+03:00'
    description: Обновление jclient до 4.1.0
    instructions: ''
    compatible: true

-   name: 9.1.0
    date: '2024-12-06T16:35:13.387669+03:00'
    description: В MonitoredThreadPoolExecutor добавлены константы с названиями пропертей,
        используемых для конфигурации MonitoredThreadPoolExecutor'а
    instructions: ''
    compatible: true

-   name: 9.0.2
    date: '2024-12-03T16:17:42.506076+03:00'
    description: Добавлено логирование ошибки, возникающей при создании объекта датасорса,
        с указанием имени датасорса, логина и хоста
    instructions: ''
    compatible: true

-   name: 9.0.1
    date: '2024-11-28T13:39:00.861592+03:00'
    description: Вернули удаленный в 9.0.0 метод ConsumerBuilder::start с пометкой
        deprecated
    instructions: ''
    compatible: true

-   name: 9.0.0
    date: '2024-11-22T18:11:53.148589+03:00'
    description: Добавлено логирование времени старта приложения
    instructions: В методы NabApplication#run(WebApplicationContext baseContext) и
        NabApplication#run(WebApplicationContext baseContext, boolean directlyUseAsWebAppRoot,
        boolean exitOnError) добавлен еще один аргумент startTimeInNanos. Поэтому
        если в сервисе используются данные методы - необходимо также передавать время
        старта приложения в наносекундах
    compatible: false

-   name: 8.0.1
    date: '2024-11-19T19:49:31.496450+03:00'
    description: В HibernateTestBase подключается SpringExtensionWithFailFast
    instructions: ''
    compatible: true

-   name: 8.0.0
    date: '2024-11-18T19:35:48.114744+03:00'
    description: "Читабельный ченджлог смотри в changelog.md.\r\n  1. KafkaConsumer\
        \ теперь умеет в ретраи. TLDR: используйте `ConsumerBuilder::withRetries`,\
        \ см. доку к этому методу. [Пример в ConsumerRetriesTest](https://github.com/hhru/nuts-and-bolts/blob/e3fd6b52fc0e97905bcc7f10838693264ae6c099/nab-tests/src/test/java/ru/hh/nab/kafka/consumer/ConsumerRetriesTest.java#L169).\
        \  \r\n1. KafkaConsumer теперь корректно стартует и останавливается Spring\
        \ контекстом, если создан как самостоятельный bean.\r\n1.  Удален SimpleKafkaConsumer.\r\
        \n1. Удален метод ConsumerBuilder::withAckProvider."
    instructions: "1. Заменяем `kafkaConsumerFactory.subscribe(...)` на `kafkaConsumerFactory.builder(...).build().start()`\r\
        \nбыло\r\n```java\r\nkafkaConsumerFactory.subscribe(\r\n    topicName,\r\n\
        \    operationName,\r\n    Message.class,\r\n    this::processMessages\r\n\
        );\r\n```\r\nстало\r\n```java\r\n kafkaConsumerFactory\r\n     .builder(topicName,\
        \ Message.class)\r\n     .withOperationName(operationName)\r\n     .withConsumeStrategy(this::processMessages)\r\
        \n     .build()\r\n     .start();\r\n```\r\n2. Заменяем SimpleKafkaConsumer\
        \ на `kafkaConsumerFactory.builder(...).build().start()`. Можно выставить\
        \ консумер бином в контекст, тогда старт/стоп он вызовет сам.\r\nбыло\r\n\
        ```java\r\npublic class SomeMessageProcessor extends SimpleKafkaConsumer<Message>\
        \ {\r\n  @Inject\r\n  public SomeMessageProcessor(@KafkaTasks KafkaConsumerFactory\
        \ kafkaTasksConsumerFactory) {\r\n    super(\r\n        kafkaTasksConsumerFactory,\r\
        \n        topicName,\r\n        operationName,\r\n        ConsumeStrategy::atLeastOnceWithBatchAck,\r\
        \n        Message.class\r\n    );\r\n```\r\nстало\r\n```java\r\npublic class\
        \ SomeMessageProcessor {\r\n  @Bean\r\n  public KafkaConsumer<Message> buildKafkaConsumer(@KafkaTasks\
        \ KafkaConsumerFactory kafkaTasksConsumerFactory) {\r\n    return kafkaTasksConsumerFactory\r\
        \n        .builder(topicName, Message.class)\r\n        .withOperationName(operationName)\r\
        \n        .withConsumeStrategy(ConsumeStrategy.atLeastOnceWithBatchAck(this::process))\r\
        \n        .build();\r\n  }\r\n```"
    compatible: false

-   name: 7.0.0
    date: '2024-10-16T15:44:20.944213+03:00'
    description: 'CacheFilter переписан на Jax-Rs, и ему задан приоритет 750. Также
        в NabApplicationBuilder добавлен api, позволяющий забиндидить фильтр на определенный
        сервлет: для этого при регистрации фильтра вместо методов bindTo и bindToRoot
        необходимо использовать метод bindToServlets'
    instructions: Если в вашем сервисе используются не-jersey сервлеты (например,
        DispatcherServlet из spring-webmvc) и их ответы нужно кешировать (в конфиге
        сервиса есть настройка http.cache.sizeInMB), то необходимо либо переписать
        все ручки на jersey, либо добавить свою реализацию CacheFilter (можно скопипастить
        старую реализацию из наба) и подключить её к не-jersey сервлетам с помощью
        вызова метода bindToServlets. Чтобы посмотреть, какие сервлеты регистрируются,
        можно сделать поиск по addServlet. Если в сервисе есть jersey фильтры, у которых
        приоритет (указывается в аннотации @Priority) <= 750 и которые должны выполняться
        после CacheFilter, необходимо для таких фильтров указать приоритет > 750
    compatible: false

-   name: 6.2.2
    date: '2024-10-14T17:54:11.531385+03:00'
    description: В SentryFilter ошибка о невалидном rid'е логируется с уровнем debug
    instructions: ''
    compatible: true

-   name: 6.2.1
    date: '2024-10-11T15:27:09.771428+03:00'
    description: Добавлен SentryFilter, в котором sentry traceId заменяется на rid
    instructions: ''
    compatible: true

-   name: 6.2.0
    date: '2024-10-01T12:50:22.640636+03:00'
    description: "1. Новый API ru.hh.nab.metrics.factory.StatsDClientFactory#createNonBlockingClient\
        \ для создания собственного StatsDSender.\r\n2. Теперь для отправки метрик\
        \ используется единый StatsD клиент aka StatsDSender\r\n3. Обновлен API ru.hh.nab.kafka.util.ConfigProvider"
    instructions: 1. При создании ConfigProvider требуется добавить дополнительный
        аргумент StatsDSender, который можно получить из Spring контекста. Он(StatsDSender)
        создается централизованно в NabProdConfig у nuts-and-bolts.
    compatible: false

-   name: 6.1.1
    date: '2024-10-01T12:05:48.323207+03:00'
    description: 1. Добавлены тэги partition & node_id у StatsD метрик для Kafka клиентов
    instructions: ''
    compatible: true

-   name: 6.1.0
    date: '2024-09-19T14:26:07.924532+03:00'
    description: "1.Для метрик jdbc_pool.connection.total_usage_ms и jdbc_pool.connection.sampled_usage_ms\
        \ удалены лэйблы с большим числом уникальных значений: controller и stack\
        \ соответственно.\r\n2. Переименована настройка, регулирующая отправку метрики\
        \ jdbc_pool.connection.sampled_usage_ms: <datasource>.monitoring.sendSampledStats\
        \ -> <datasource>.monitoring.samplePoolUsageStats\r\n3. Изменена логика отправки\
        \ метрик jdbc_pool.connection.total_usage_ms и jdbc_pool.connection.sampled_usage_ms:\
        \ ранее обе метрики могли отправляться одновременно, теперь только какая-то\
        \ одна в зависимости от настройки <datasource>.monitoring.samplePoolUsageStats\r\
        \n4. Удалены классы пакета ru.hh.nab.datasource.monitoring.stack, т.к. удален\
        \ лэйбл stack, для расчета которого они требовались"
    instructions: "1. Удалить настройку <datasource>.monitoring.sendSampledStats из\
        \ service.properties\r\n2. Если для снижения нагрузки на приемник метрик требуется\
        \ снимать сэмплированные метрики использования jdbc пула, добавить в service.properties\
        \ настройку <datasource>.monitoring.samplePoolUsageStats=true\r\n3. Удалить\
        \ использование классов из пакета ru.hh.nab.datasource.monitoring.stack"
    compatible: false

-   name: 6.0.1
    date: '2024-09-12T18:14:36.724702+03:00'
    description: '* Исправлен баг из-за которого в метриках kafka был потерян client_id
        тэг'
    instructions: ''
    compatible: true

-   name: 6.0.0
    date: '2024-09-11T12:54:54.551301+03:00'
    description: "Необработанные `SQLTransientConnectionException` и `RejectedExecutionException`\
        \ теперь по умолчанию превращаются в http-код 597.\r\nСлужебные методы в `NabExceptionMapper`\
        \ и `AnyExceptionMapper` теперь имеют доступ `protected`."
    instructions: "Если вы хотите, чтобы для вашего сервиса ретраились ошибки 597,\
        \ надо в `upstream-config.yml` в секцию `retry_policy` добавить запись с ключом\
        \ `597` и значением `idempotent: 'false'`.\r\nЕсли у вас в коде вызывается\
        \ конструктор `NabExceptionMapper(...)` или метод `AnyExceptionMapper.toResponseInternal(...)`\
        \ не из классов-наследников, нужно исправить такой код."
    compatible: false

-   name: 5.4.1
    date: '2024-09-09T20:33:33.078244+03:00'
    description: Размер пула StatsD-клиента для отправки метрик сокращен с 512 до
        8 по умолчанию
    instructions: ''
    compatible: true

-   name: 5.4.0
    date: '2024-08-29T13:19:29.961116+03:00'
    description: Обновлен java-dogstatsd-client до 4.4.2
    instructions: 'Если вы в коде своего сервиса сами конфигурируете бин StatsDClient,
        то не делайте так, используйте набовский. Если сервис не на набе, то в NonBlockingStatsDClientBuilder
        задайте: enableAggregation(false), originDetectionEnabled(false) и enableTelemetry(false).
        Если этого не сделать, метрики перестанут отправляться'
    compatible: false

-   name: 5.3.1
    date: '2024-08-19T17:34:49.078958+03:00'
    description: 1. Исправлена ошибка приводящая к потери kafka метрик
    instructions: ''
    compatible: true

-   name: 5.3.0
    date: '2024-08-16T13:56:05.682995+03:00'
    description: 1. Downgrade java-dogstatsd-client с 4.4.2 до 2.10.5
    instructions: 1. Если успели обновиться до nuts-and-bolts 5.2.0, то нужно откатить
        инструкцию по обновлению для java-dogstatsd-client из релиза 5.2.0
    compatible: false

-   name: 5.2.0
    date: '2024-08-15T13:44:43.647008+03:00'
    description: " НЕ ОБНОВЛЯТЬСЯ НА ЭТУ ВЕРСИЮ, сломан statsd клиент - исправлено\
        \ в 5.3.0  1. Обновлен java-dogstatsd-client до 4.4.2\r\n2. Аггрегация метрик\
        \ включена по-умолчанию"
    instructions: "1. Если используется API из java-dogstatsd-client напрямую, то\
        \ нужно ознакомиться с гайдом миграции https://github.com/DataDog/java-dogstatsd-client?tab=readme-ov-file#migrating-from-2x-to-3x\r\
        \n2. Гайд миграции применим для миграции  с 2.x.x до 4.x.x миную версию 3.x.x"
    compatible: false

-   name: 5.1.1
    date: '2024-08-14T13:53:35.565635+03:00'
    description: 1. Тэг "client-id" заменен на "client_id" у Kafka метрик для совместимости
        с Okmeter
    instructions: ''
    compatible: true

-   name: 5.1.0
    date: '2024-08-13T14:05:59.090071+03:00'
    description: В nab-testbase добавлен класс NoopKafkaConsumerFactory, который можно
        использовать в тестах вместо мокирования. То есть в тестовых спринговых конфигах
        вместо mock(KafkaConsumerFactory.class) можно создавать объект new NoopKafkaConsumerFactory()
    instructions: ''
    compatible: true

-   name: 5.0.0
    date: '2024-08-08T12:12:24.074420+03:00'
    description: "1.  hh-java-libs/kafka-client-utils перенесен в nuts-and-bolts/nab-kafka\r\
        \n2. Модуль nab-kafka более не содержит зависимостей на kafka-client-utils\r\
        \n3. Константы из NabProdConfig для StatsD клиента переехали в модуль nab-metrics\
        \ в класс StatsDConstants\r\n4. KafkaStatsDReporter более не является spring\
        \ bean-ом и подключается с помощью SPI MetricsReporter от kafka клиента\r\n\
        5. KafkaStatsDReporter собирает все доступные метрики без фильтрации или аггрегации\r\
        \n6. Добавлены новые файлы логирования для драйверов и соответствущих библиотек\
        \ из nuts-and-bolts : kafka, scylla"
    instructions: "1. Удалить объявление и создание spring bean-а KafkaStasdReporter\
        \ из своего spring контекста, пример : https://github.com/hhru/jlogic/blob/9dc738ec3d3c9a5a50807ba61b64642315083cad/src/main/java/ru/hh/jlogic/KafkaProdConfig.java#L40\r\
        \n2. Заменить maven артефакт kafka-client-utils на nab-kafka\r\n3. Заменить\
        \ пакет ru.hh.kafka.monitoring на ru.hh.nab.kafka.monitoring\r\n4. Заменить\
        \ импорт констант STATSD_HOST_PROPERTY, STATSD_HOST_ENV, STATSD_PORT_PROPERTY,\
        \ STATSD_PORT_ENV, STATSD_QUEUE_SIZE_PROPERTY, STATSD_QUEUE_SIZE_ENV, STATSD_MAX_PACKET_SIZE_BYTES_PROPERTY,\
        \ STATSD_MAX_PACKET_SIZE_BYTES_ENV, STATSD_BUFFER_POOL_SIZE_PROPERTY, STATSD_BUFFER_POOL_SIZE_ENV\
        \ из NabProdConfig на StatsDConstants"
    compatible: false

-   name: 4.54.1
    date: '2024-05-28T16:59:25.339042+03:00'
    description: '* Заменен logger com.datastax.driver на com.dastastax'
    instructions: ''
    compatible: true

-   name: 4.54.0
    date: '2024-05-23T17:14:21.885513+03:00'
    description: ExceptionMapper'ы по дефолту возвращают ответ с Content-Type=application/json
    instructions: Если требуется, чтобы при возникновении исключений возвращался ответ
        с Content-Type, отличным от application/json, то необходимо заимплементить
        ExceptionSerializer
    compatible: false

-   name: 4.53.0
    date: '2024-05-23T10:17:53.354944+03:00'
    description: не отличается от версии 4.52.1
    instructions: ''
    compatible: false

-   name: 4.52.1
    date: '2024-05-22T21:22:18.480090+03:00'
    description: В nab-kafka появилась возможность на старте подписаться на все партиции
        топика (игнорируя consumer-group). Для этого нужно использовать метод ConsumerBuilder#withAllPartitionsAssigned.
    instructions: ''
    compatible: true

-   name: 4.52.0
    date: '2024-05-13T11:43:34.386313+03:00'
    description: "Добавлен новый интерфейс ru.hh.nab.kafka.consumer.ConsumerBuilder\
        \ и его реализация DefaultConsumerBuilder. Они предназначены для возможности\
        \ гибкого конфигурирования и старта kafka-consumer внутри сервиса.\r\n\r\n\
        В интерфейс ru.hh.nab.kafka.consumer.KafkaConsumerFactory добавлен метод builder,\
        \ возвращающий новый интерфейс ru.hh.nab.kafka.consumer.ConsumerBuilder.\r\
        \n\r\nМетоды ru.hh.nab.kafka.consumer.KafkaConsumerFactory#subscribe задепрекейчены\
        \ (вместо них следует использовать метод ru.hh.nab.kafka.consumer.KafkaConsumerFactory#builder)"
    instructions: 'При наличии в сервисе kafka-консумеров и использовании nab-kafka:
        методы ru.hh.nab.kafka.consumer.KafkaConsumerFactory#subscribe задепрекейчены,
        вместо них следует использовать последовательный вызов методов ru.hh.nab.kafka.consumer.KafkaConsumerFactory#builder
        и ru.hh.nab.kafka.consumer.ConsumerBuilder#start.'
    compatible: false

-   name: 4.51.1
    date: '2024-05-06T12:44:26.515971+03:00'
    description: "- add dest host for telemetry\r\n- jclient 3.12.15"
    instructions: ''
    compatible: true

-   name: 4.51.0
    date: '2024-04-16T13:25:44.587427+03:00'
    description: 'Фильтр ResourceInformationLoggingFilter переименован в ResourceInformationFilter.
        Для ResourceInformationFilter изменен приоритет: гарантированно будет вызываться
        раньше других Jax-Rs фильтров. Добавлен класс NabPriorities. NabExceptionMapper.LOW_PRIORITY
        помечен deprecated'
    instructions: NabExceptionMapper.LOW_PRIORITY помечен deprecated. Используй NabPriorities.LOW_PRIORITY
    compatible: false

-   name: 4.50.1
    date: '2024-04-02T10:25:33.631390+03:00'
    description: "* Kafka tests are now compatible with ARM\r\n* Upgraded kafka-test-utils\
        \ to 0.0.15 version"
    instructions: ''
    compatible: true

-   name: 4.50.0
    date: '2024-04-01T13:02:49.894224+03:00'
    description: Extended DefaultConsumerFactory API to allow assigning of client.id
    instructions: ''
    compatible: true

-   name: 4.49.3
    date: '2024-03-26T17:14:40.299738+03:00'
    description: up JClient to 3.12.12
    instructions: ''
    compatible: true

-   name: 4.49.2
    date: '2024-03-01T16:23:25.444186+03:00'
    description: Выпиливание хардкода настроек Counters / Histogram
    instructions: ''
    compatible: true

-   name: 4.49.1
    date: '2024-02-29T16:03:19.838074+03:00'
    description: Замена депрекейтнотуго BatchErrorHandler на CommonErrorHandler
    instructions: ''
    compatible: true

-   name: 4.49.0
    date: '2024-02-27T17:49:36.044909+03:00'
    description: 'MonitoredThreadPoolExecutor: добавлена возможность конфигурировать
        compactionRatio для гистограммы taskDuration. В Histograms добавлен новый
        конструктор, старый помечен как deprecated'
    instructions: ''
    compatible: true

-   name: 4.48.0
    date: '2024-02-27T13:30:31.698170+03:00'
    description: "* Добавлен новый API для сбора метрик CompactHistogram\r\n* Исправлена\
        \ ошибка потеря метрик в MonitoredThreadPoolExecutor при большом количестве\
        \ уникальных значений"
    instructions: ''
    compatible: true

-   name: 4.47.0
    date: '2024-02-20T18:06:14.048295+03:00'
    description: if there are no any implementations of ru.hh.nab.starter.exceptions.ExceptionSerializer
        than exception will be mapped in NabExceptionMapper to response in common
        errors format
    instructions: if you don't use any implementations of ru.hh.nab.starter.exceptions.ExceptionSerializer
        in your service and consumers of your service's api work with body of response
        that was generated in NabExceptionMapper by default serializer, you have to
        fix code on consumers' side
    compatible: false

-   name: 4.46.1
    date: '2024-02-13T15:38:25.219470+03:00'
    description: Повышение стабильности юнит-тестов
    instructions: ''
    compatible: true

-   name: 4.46.0
    date: '2024-02-12T10:48:45.378800+03:00'
    description: "В телеметрийные спаны добавлены новые атрибуты.\r\nhttp.route -\
        \ содержит uri template запроса, обрабатываемого сервером.\r\nuser_agent.original\
        \ - содержит значение заголовока User-Agent"
    instructions: Если в вашем сервисе есть специфичные Jax-Rs фильтры(реализуют интерфейс
        javax.ws.rs.container.ContainerRequestFilter), прерывающие запрос, то для
        гарантированного вычисления указанных атрибутов необходимо убедиться, что
        они вызываются после ResourceInformationLoggingFilter. Порядок вызова определяется
        аннотацией @Priority. Значение должно быть больше 500. По умолчанию для пользовательских
        фильтров используется Priorities.USER=5000 Если же в вашем сервисе есть специфичные
        servlet фильтры(реализуют интерфейс javax.servlet.Filter), прерывающие запрос
        - их требуется переписать на Jax-Rs
    compatible: false

-   name: 4.45.1
    date: '2024-02-07T19:43:39.389211+03:00'
    description: обновление jclient до 3.12.6
    instructions: ''
    compatible: true

-   name: 4.45.0
    date: '2024-01-30T13:50:51.286974+03:00'
    description: В сентри клиенте переменная release теперь берется из env=SENTRY_RELEASE
    instructions: "В сервисах необходимо удалить оверрайд release из sentry.properties\r\
        \nПример того что надо удалить - https://github.com/hhru/hh.ru/blob/1225a83817be31180c827ac71f1673bd43fc1698/hh-xmlback/src/main/resources/sentry.properties#L1"
    compatible: false

-   name: 4.44.6
    date: '2024-01-29T16:23:25.576330+03:00'
    description: Обновление sentry sdk до 7.2.0, public-pom до 1.57.0
    instructions: ''
    compatible: true

-   name: 4.44.5
    date: '2023-12-27T18:31:51.014373+03:00'
    description: ''
    instructions: ''
    compatible: true

-   name: 4.44.4
    date: '2023-12-15T11:20:42.988754+03:00'
    description: Исправлена ошибка при одновременном использовании jdebug и `X-HH-AcceptErrors`.
    instructions: ''
    compatible: true

-   name: 4.44.3
    date: '2023-12-08T16:34:42.428965+03:00'
    description: Добавлена валидация параметров конструктора KafkaProducerFactory.
        Если в файловом конфиге совсем нет конфигурации для этой фактори, а в спринг
        контексте она создается, приложение не стартует
    instructions: К сожалению, ломается старт приложений, у которых в файловом конфиге
        указан явно ключ bootstrap.servers. Приложение не стартует с ошибкой Either
        specify 'bootstrap.servers' in config or provide bootstrapServersSupplier
        to this factory. В этом случае надо в файловом конфиге убрать ключ bootstrap.servers
        или поменять код, используя конструктор KafkaProducerFactory без bootstrapServersSupplier
    compatible: false

-   name: 4.44.2
    date: '2023-12-08T16:29:15.059111+03:00'
    description: пофикшено логирование долгих задач в MonitoredThreadPoolExecutor
    instructions: ''
    compatible: true

-   name: 4.44.1
    date: '2023-12-07T16:45:34.082323+03:00'
    description: Добавлена новая метрика для пула тредов threadPool.taskExecutionStartLag,
        которая показывает, с какой задержкой поставленная на выполнение таска начала
        выполняться (актуально при использовании очереди на выполнение).
    instructions: ''
    compatible: true

-   name: 4.44.0
    date: '2023-12-06T12:22:22.299299+03:00'
    description: "1. Исправлен хост jenkins.\r\n2. Более надёжная остановка unit-тестов\
        \ при ошибке старта спринг-контекста."
    instructions: Если в коде использовался класс `SpringContextStatusCheckExtension`,
        надо заменить на `SpringExtensionWithFailFast`. И если `SpringContextStatusCheckExtension`
        использовался совместно с `SpringExtension`, то последний надо убрать, т.к.
        `SpringExtensionWithFailFast` теперь наследуется от него.
    compatible: false

-   name: 4.43.1
    date: '2023-12-05T16:33:19.213756+03:00'
    description: '* добавлена возможность конфигурации bufferPoolSize у StatsD клиента
        через настройку "statsd.buffer.pool.size" или env переменную "STATSD_BUFFER_POOL_SIZE"'
    instructions: ''
    compatible: true

-   name: 4.43.0
    date: '2023-11-30T14:49:24.836845+03:00'
    description: Поменял расширение неструктурированных логов
    instructions: Неструктурированные логи теперь будут писаться в файлы .rlog, ранее
        писались в .log. Для сервисов ххру важно проверить, что нету кастомных настроек
        для логов, например так https://github.com/search?q=org%3Ahhru+criteria.log&type=code
    compatible: false

-   name: 4.42.11
    date: '2023-11-30T12:18:04.318233+03:00'
    description: "1. Добавлена метаинформация для описания openapi через аннотации\
        \ microprofile для существующих ExceptionMapper-ов\r\n2. Добавлена зависимость\
        \ на ru.hh.errors:errors-common\r\n3. Добавлена зависимость на org.eclipse.microprofile.openapi:microprofile-openapi-api"
    instructions: ''
    compatible: true

-   name: 4.42.10
    date: '2023-11-28T16:09:50.239701+03:00'
    description: "В телеметрийные спаны добавлены новые атрибуты: code.function и\
        \ code.namespace.\r\ncode.function - наименование вызываемого метода\r\ncode.namespace\
        \ - полный путь к классу, метод которого вызывается"
    instructions: ''
    compatible: true

-   name: 4.42.9
    date: '2023-11-20T18:15:55.498236+03:00'
    description: ''
    instructions: ''
    compatible: true

-   name: 4.42.8
    date: '2023-11-15T10:55:18.796480+03:00'
    description: Обновление public-pom до 1.55.0, jlcient до 3.12.1
    instructions: ''
    compatible: true

-   name: 4.42.7
    date: '2023-11-10T17:51:18.191744+03:00'
    description: 'Добавлена возможность задавать размер пакета для отправки в StatsD
        с помощью конфига statsd.maxPacketSizeBytes. ВАЖНО. Если используется loopback,
        значение параметра не должно превышать 65000 байт. Если StatsD-сервер находится
        на отдельном хосте, то параметр не должен превышать 1400 байт. Подробнее здесь:
        https://github.com/DataDog/java-dogstatsd-client/pull/17'
    instructions: ''
    compatible: true

-   name: 4.42.7
    date: '2023-11-10T17:38:10.654044+03:00'
    description: 'Добавлена возможность задавать размер пакета для отправки в StatsD
        с помощью конфига statsd.maxPacketSizeBytes. ВАЖНО. Если используется loopback,
        значение параметра не должно превышать 65000 байт. Если StatsD-сервер находится
        на отдельном хосте, то параметр не должен превышать 1400 байт. Подробнее здесь:
        https://github.com/DataDog/java-dogstatsd-client/pull/17'
    instructions: ''
    compatible: true

-   name: 4.42.6
    date: '2023-11-08T15:01:24.202477+03:00'
    description: up JClient to 3.12.0
    instructions: ''
    compatible: true

-   name: 4.42.5
    date: '2023-11-01T20:45:41.644368+03:00'
    description: Добавлена удобняшка SimpleKafkaConsumer, описана в nab-kafka/README.md
    instructions: ''
    compatible: true

-   name: 4.42.4
    date: '2023-10-12T10:10:52.805989+03:00'
    description: Обновление jclient до 3.11.2
    instructions: ''
    compatible: true

-   name: 4.42.3
    date: '2023-10-04T16:29:16.367997+03:00'
    description: В спаны проставляется тег peer.service
    instructions: ''
    compatible: true

-   name: 4.42.2
    date: '2023-09-21T11:39:36.876123+03:00'
    description: support default http client context supplier
    instructions: ''
    compatible: true

-   name: 4.42.1
    date: '2023-08-15T12:41:45.591153+03:00'
    description: Инжект бина DatabaseSwitcher в DataSourceContextUnsafe вынесен в
        @PostConstruct метод
    instructions: ''
    compatible: true

-   name: 4.42.0
    date: '2023-08-11T17:52:59.327095+03:00'
    description: "Добавлена возможность работы с несколькими базами данных и динамического\
        \ переключения между ними. Данный функционал может быть полезен, например,\
        \ при миграции с одной базы данных на другую. Подробнее смотри в javadoc `DatabaseSwitcher`.\
        \ \r\n\r\nКласс `DataSourceContextUnsafe` был перенесен из модуля `nab-hibernate`\
        \ в модуль `nab-data-source`.\r\n\r\nДатасорс, который передается в конструктор\
        \ `RoutingDataSource`, больше не оборачивается в `LazyConnectionDataSourceProxy`.\
        \ Кроме того, в `RoutingDataSource` добавлен конструктор, не принимающий на\
        \ вход никаких датасорсов. Аналогично, в `RoutingDataSourceFactory` добавлен\
        \ метод `create`, не принимающий на вход никаких датасорсов.\r\nВажно! При\
        \ работе с несколькими базами данных (при наличии бина `DatabaseSwitcher`)\
        \ не допускается создание инстанса `RoutingDataSource` с помощью конструктора\
        \ или фабричного метода `RoutingDataSource.create`, принимающих на вход объект\
        \ датасорса - будет вырошено исключение."
    instructions: "Если в конструктор `RoutingDataSource` передается какой-то датасорс,\
        \ который по факту не используется (в коде сервиса не используется `@Transactional`),\
        \ тогда используйте для создания инстанса `RoutingDataSource` конструктор,\
        \ не принимающий на вход никаких датасорсов.\r\n\r\nЕсли в коде сервиса используется\
        \ `DataSourceContextUnsafe`, необходимо поправить импорт. Если в коде сервиса\
        \ осуществляется вызов метода `DataSourceContextUnsafe.getDataSourceKey`,\
        \ то нужно исправить этот вызов на `DataSourceContextUnsafe.getDataSourceName`\
        \ (метод был переименован)"
    compatible: false

-   name: 4.41.0
    date: '2023-08-01T15:22:27.707513+03:00'
    description: Добавлена возможность передавать кастомный supplier для получения
        списка хостов kafka кластера
    instructions: ''
    compatible: true

-   name: 4.40.3
    date: '2023-07-26T15:13:45.637037+03:00'
    description: '* production logger ( aka NabLogbackBaseConfigurator ) более не
        конфигурируется при наличии service-test.properties в classpath'
    instructions: ''
    compatible: true

-   name: 4.40.2
    date: '2023-07-21T18:54:02.560474+03:00'
    description: "1. Исправлена работа настройки sentry.level: теперь она действительно\
        \ устанавливает уровень логирования  в sentry\r\n2. Добавлена отдельная настройка\
        \ sentry.breadcrumb.level для уровня логирования breadcrumbs в sentry. Значение\
        \ по умолчанию: ERROR\r\n\r\nNB: Значения в sentry.level и sentry.breadcrumb.level\
        \ валидируются при старте и приложение не поднимится при невалидных настройках!\
        \ Доступные значения TRACE, ERROR, INFO, DEBUG, WARN (без учета регистра)"
    instructions: ''
    compatible: true

-   name: 4.40.1
    date: '2023-07-12T11:52:59.147292+03:00'
    description: "* RoutingDataSourceFactory can be used in tests now.\r\n* Fix ConsumerRecoveryAfterFailTest.\r\
        \n* Up public-pom to 1.54.1."
    instructions: ''
    compatible: true

-   name: 4.40.0
    date: '2023-06-22T15:41:46.582718+03:00'
    description: Добавлена возможность получать адреса для stateful-сервсов из consul.
    instructions: ''
    compatible: true

-   name: 4.39.3
    date: '2023-05-30T16:05:30.089079+03:00'
    description: fix for histograms
    instructions: ''
    compatible: true

-   name: 4.39.2
    date: '2023-05-29T14:41:30.721405+03:00'
    description: add ranged metrics for histrograms
    instructions: ''
    compatible: true

-   name: 4.39.1
    date: '2023-05-16T17:48:01.260252+03:00'
    description: 'конфигурация для окметра: хост /порт'
    instructions: ''
    compatible: true

-   name: 4.39.0
    date: '2023-05-11T13:46:07.099900+03:00'
    description: "* Обновление public-pom до 1.54.0\r\n* Обновление JClient до 3.11.0"
    instructions: "Транзитивные изменения как следствие обновления JClient.\r\n* В\
        \ методах и конструкторах публичного API где раньше передавался Optional теперь\
        \ нужно передавать значение без обёртки или null. Например, классы ResultWithStatus,\
        \ ResultOrErrorWithStatus, ResultOrErrorwithResponse,EmptyOrErrorWithStatus,\
        \ RequestDebug.\r\n* При имплементации TypeConverter.getSupportedContentTypes\
        \ в возвращаемом типе теперь ожидается Collection вместо Optional<Collection>.\
        \ НЕ! передавайте null! Вместо этого используйте любую пустую коллекцию."
    compatible: false

-   name: 4.38.4
    date: '2023-04-19T16:44:56.694562+03:00'
    description: Add "opentelemetry.jdbc.enabled" property (disabled by default)
    instructions: ''
    compatible: true

-   name: 4.38.3
    date: '2023-04-17T17:56:24.843590+03:00'
    description: OpenTelemetry spans "SET STATEMENT_TIMEOUT" are filtred now
    instructions: ''
    compatible: true

-   name: 4.38.2
    date: '2023-04-17T13:15:41.080178+03:00'
    description: add field otel.status_description for openelemetry
    instructions: ''
    compatible: true

-   name: 4.38.1
    date: '2023-04-13T16:35:48.462838+03:00'
    description: jclient 3.10.1
    instructions: ''
    compatible: true

-   name: 4.38.0
    date: '2023-04-10T14:13:09.722122+03:00'
    description: "* new nab-telemetry-jdbc module has been added which provides ability\
        \ to add OpenTelemetry spans to JDBC connection and statement operations\r\
        \n* add addNamedDataSource method for RoutingDataSource\r\n* change DataSourceFactory\
        \ constructor signature\r\n* up public-pom to 1.53.1\r\n* up Java to 17"
    instructions: "* update Java to 17 or higher if not already updated\r\n* if DataSourceFactory\
        \ manual creation used via 'new' (e.g. for tests) - update constructor parameters\
        \ by providing OpenTelemetryJdbcExtension (usually null for unit tests)\r\n\
        * if RoutingDataSource used and datasource's for routing created via DataSourceFactory\
        \ - replace addDataSource method with addNamedDataSource (there is no more\
        \ need to specify DataSource name twice)\r\n* if any kind of DataSource used\
        \ in project:\r\n    * add nab-telemetry-jdbc maven dependency\r\n    * add\
        \ NabTelemetryJdbcProdConfig to Spring Prod config\r\n    * if DataSource\
        \ created manually (NOT via DataSourceFactory) wrap it with NabTelemetryDataSourceFactory#wrap"
    compatible: false

-   name: 4.37.4
    date: '2023-03-31T16:08:18.063400+03:00'
    description: Add `LoggingLevel.WARN_WITH_STACK_TRACE` option for `NabExceptionMapper`.
    instructions: ''
    compatible: true

-   name: 4.37.3
    date: '2023-03-24T15:07:49.388971+03:00'
    description: В WebApplicationExceptionMapper добавлено логирование 502 ошибок
        с уровнем DEBUG
    instructions: ''
    compatible: true

-   name: 4.37.2
    date: '2023-03-07T07:13:51.781740+03:00'
    description: Добавлена возможность получать nodeName из env NODE_NAME и syslogHost
        из env SYSLOG_HOST
    instructions: ''
    compatible: true

-   name: 4.37.1
    date: '2023-02-09T14:50:39.152825+03:00'
    description: Добавлена возможность пропускать специальные skipLogLevelOverrideException
        в LogLevelOverrideExtension
    instructions: ''
    compatible: true

-   name: 4.37.0
    date: '2023-02-08T14:14:38.028511+03:00'
    description: Добавили возможность устанавливать syslogtag  через конфиг log.syslogTag.
    instructions: 'С этой версии больше не нужно указывать port для syslog в каждом
        сервисе. Теперь этот порт общий для всех, и чтобы логирование работало, необходимо
        поправить конфиг сервиса - убрать port.syslog в service-definition и использовать
        макрос log_conf_java(), внутри которого добавлен новый конфиг log.syslogTag,
        без которого логирование сломается. Вот пример обновления: https://github.com/hhru/deploy/pull/1040/files.
        В коде сервиса изменений не требуется'
    compatible: false

-   name: 4.36.7
    date: '2022-12-19T11:25:36.204665+03:00'
    description: Обновление public-pom до 1.52.4
    instructions: ''
    compatible: true

-   name: 4.36.6
    date: '2022-12-14T16:20:02.308311+03:00'
    description: Обновление jclient до 3.9.11
    instructions: ''
    compatible: true

-   name: 4.36.5
    date: '2022-12-14T10:17:19.677881+03:00'
    description: Обновление jclient до 3.9.10
    instructions: ''
    compatible: true

-   name: 4.36.4
    date: '2022-11-21T16:48:00.485040+03:00'
    description: Поднята версия дефолтного образа тестконтейнера Redis до 6.2.3. Поле
        REDIS_IMAGE_ENV_VARIABLE, по значению которого можно подтягивать версию образа
        Redis из переменных окружения, сделано публичным.
    instructions: ''
    compatible: true

-   name: 4.36.3
    date: '2022-11-16T14:41:38.679710+03:00'
    description: Добавлен testcontainer Redis
    instructions: ''
    compatible: true

-   name: 4.36.2
    date: '2022-10-12T13:15:00.333439+03:00'
    description: Обновление public-pom до 1.52.3
    instructions: ''
    compatible: true

-   name: 4.36.1
    date: '2022-10-10T20:14:57.205411+03:00'
    description: '- fix sentry configuration so it reads sentry.properties'
    instructions: Нужно в файле sentry.properties поменять "stacktrace.app.packages"
        на "in-app-includes"
    compatible: false

-   name: 4.36.0
    date: '2022-09-09T16:19:02.683653+03:00'
    description: Убран master как выбор по-умолчанию для RoutingDataSource, при попытке
        использовать DataSource без конфигурации будет получена ошибка.
    instructions: "* Необходимо добавить недостающие DataSource в конфигурацию\r\n\
        * Добавить новые DataSource в RoutingDataSource"
    compatible: false

-   name: 4.35.2
    date: '2022-09-08T19:16:15.739460+03:00'
    description: Метрика consul.request переименована в consul-client.request. Также
        у данной метрики выпилены теги url и method
    instructions: ''
    compatible: true

-   name: 4.35.1
    date: '2022-09-05T14:30:32.414884+03:00'
    description: Удалена обработка настройки consul.client.sendStats - теперь метрики
        о запросах в консул отправляются всегда. Добавлена возможность указать statsd.defaultPeriodicSendIntervalSec
        (дефолтный интервал отправки метрик), который будет использоваться при вызове
        метода StatsDSender.sendPeriodically(Runnable)
    instructions: ''
    compatible: true

-   name: 4.35.00
    date: '2022-09-01T18:17:52.769907+03:00'
    description: обновлен клиент sentry до последнего
    instructions: нужно взять DSN в новой версии sentry и обновить его в конфиге.
        Со старой версией не проверяли, но скорее всего могут быть проблемы
    compatible: false

-   name: 4.34.19
    date: '2022-08-15T17:35:53.694650+03:00'
    description: Добавлена отправка метрик по запросам в консул из сервисов. Для включения
        отправки метрик нужно в конфигах установить параметр consul.client.sendStats=true
    instructions: ''
    compatible: true

-   name: 4.34.18
    date: '2022-07-26T13:24:01.232737+03:00'
    description: Исправлен дефект, из-за которого при старте приложения отправлялась
        метрика о переключении на secondaryDataSource
    instructions: ''
    compatible: true

-   name: 4.34.17
    date: '2022-07-26T11:55:41.919444+03:00'
    description: '- добавлена возможность иметь несколько MappingConfig'
    instructions: ''
    compatible: true

-   name: 4.34.16
    date: '2022-07-22T14:15:26.262943+03:00'
    description: Добавлена настройка routing.failedHealthcheck.secondaryDataSource,
        в которой можно указать бд, на которую будет осуществляться переключение при
        неуспешном хелсчеке основной бд. Для включения хелсчека бд и отправки запросов
        в secondaryDataSource, нужно * добавить в конфиги необходимые параметры https://github.com/hhru/deploy-dev/pull/6071/files
        * исправить в коде создание объектов DataSourceFactory и RoutingDataSource
        https://github.com/hhru/hh.ru/pull/10690/files
    instructions: ''
    compatible: true

-   name: 4.34.15
    date: '2022-07-14T12:41:55.493347+03:00'
    description: "Добавлена отправка метрик при переключении на базу master (переключение\
        \ происходит, если не проходит healthcheck).\r\nЧтобы отправка метрик работала,\
        \ нужно создавать инстанс RoutingDataSource с помощью фабрики RoutingDataSourceFactory.\
        \ Если создавать RoutingDataSource как раньше (с помощю конструктора), при\
        \ переключении на мастер метрики отправляться НЕ будут."
    instructions: ''
    compatible: true

-   name: 4.34.14
    date: '2022-07-12T18:22:13.698475+03:00'
    description: Добавлена отправка метрик при выполнении хелсчека БД и попытке получить
        коннекшен к недоступной БД
    instructions: ''
    compatible: true

-   name: 4.34.13
    date: '2022-07-06T16:07:34.067976+03:00'
    description: Добавлена поддержка healthcheck для БД
    instructions: ''
    compatible: true

-   name: 4.34.12
    date: '2022-06-09T18:45:18.698239+03:00'
    description: Исправлен механизм оверрайдов уровней логирования в тестах
    instructions: ''
    compatible: true

-   name: 4.34.11
    date: '2022-05-23T12:11:41.260970+03:00'
    description: Fix NPE in StatsDSender.getFullMetricName
    instructions: ''
    compatible: true

-   name: 4.34.10
    date: '2022-05-20T14:50:42.301502+03:00'
    description: Поднял версию public-pom, удалил дублирующие зависимости
    instructions: Чтобы не было проблем с зависимостями нужно поднять в приложении
        версию common-pom до 1.47.1 или выше
    compatible: false

-   name: 4.34.9
    date: '2022-04-29T14:48:45.437066+03:00'
    description: Добавил использование bom для testcontaiers
    instructions: ''
    compatible: true

-   name: 4.34.8
    date: '2022-04-29T13:17:57.044167+03:00'
    description: support concurrency for kafka consumer
    instructions: ''
    compatible: true

-   name: 4.34.7
    date: '2022-04-28T14:19:51.611705+03:00'
    description: Added ru.hh.nab.common.util.ExceptionUtils\r\nRenamed ru.hh.nab.starter.exceptions.ExceptionUtils\
        \ to MappableExceptionUtils
    instructions: Заменить использование ru.hh.nab.starter.exceptions.ExceptionUtils
        на ru.hh.nab.starter.exceptions.MappableExceptionUtils
    compatible: false

-   name: 4.34.6
    date: '2022-04-27T13:07:42.914857+03:00'
    description: Вынес логи от `GlobalTimeoutCheck` в отдельный файл (`jclient-timeout-check.slog`)
    instructions: ''
    compatible: true

-   name: 4.34.5
    date: '2022-04-04T17:16:49.705138+03:00'
    description: Удалил модуль nab-testbase-old. Нигде не пригодился
    instructions: ''
    compatible: true

-   name: 4.34.4
    date: '2022-04-04T12:08:48.598374+03:00'
    description: Обновление безопасности
    instructions: ''
    compatible: true

-   name: 4.34.0
    date: '2022-03-03T18:36:00.000000+03:00'
    description: jakarta.ws.rs-api добавлена в dependencyManagement
    instructions: Найдите явное использование jakarta.ws.rs-api в pom-файла и удалите
        версию, чтобы уменьшить риск конфликта зависимостей
    compatible: false

-   name: 4.33.14
    date: '2022-03-02T18:22:00.000000+03:00'
    description: HTTP-cтатус телеметрии соответствует спецификации
    instructions: ''
    compatible: true

-   name: 4.33.13
    date: '2022-02-18T12:08:00.000000+03:00'
    description: Фикс зависимости nab-telemetry-kafka
    instructions: ''
    compatible: true

-   name: 4.33.12
    date: '2022-02-17T19:36:00.000000+03:00'
    description: Добавление телеметрии в кафку
    instructions: ''
    compatible: true

-   name: 4.33.11
    date: '2022-02-04T17:16:00.000000+03:00'
    description: Обновление JClient до 3.9.7
    instructions: ''
    compatible: true

-   name: 4.33.10
    date: '2022-01-28T16:20:00.000000+03:00'
    description: Фикс логгирования ошибок кафки
    instructions: ''
    compatible: true

-   name: 4.33.9
    date: '2022-01-25T15:51:00.000000+03:00'
    description: Обновление JClient и удаление Guav'ы
    instructions: ''
    compatible: true

-   name: 4.33.8
    date: '2022-01-21T15:39:00.000000+03:00'
    description: Обновление библиотек
    instructions: ''
    compatible: true

-   name: 4.33.7
    date: '2022-01-19T15:03:00.000000+03:00'
    description: Фикс listener'а телеметрии
    instructions: ''
    compatible: true

-   name: 4.33.6
    date: '2022-01-17T17:07:00.000000+03:00'
    description: NaB теперь падает при неизвестных настройках kafk'и
    instructions: '* Если в конфигах кафка продюсеров есть неизвестные настройки -
        падаем. Часто встречающаяся левая настройка - timeout.ms, её надо удалять.\n
        * Добавилась пара новых ExceptionMapper-ов (для CompletionException и ExecutionException),
        так что свои можно удалить.'
    compatible: false

-   name: 4.33.5
    date: '2022-01-17T16:16:00.000000+03:00'
    description: Batch-процессор для телеметрии
    instructions: ''
    compatible: true

-   name: 4.33.4
    date: '2022-01-14T13:14:00.000000+03:00'
    description: Обновление Consul-клиента
    instructions: ''
    compatible: true

-   name: 4.33.3
    date: '2022-01-14T11:33:00.000000+03:00'
    description: Изменение формата настроек для телеметрии
    instructions: В конфиге вместо opentelemetry.collector.host и opentelemetry.collector.port
        используется opentelemetry.collector.url, который выглядит как http://{opentelemetry.collector.host}:{opentelemetry.collector.port}
    compatible: false

-   name: 4.33.0
    date: '2022-01-10T16:26:00.000000+03:00'
    description: Реорганизация квалификаторов
    instructions: Ищем текстовым поиском в Spring Config'е:\n * String serviceName
        и добавляем квалификатор @Named(SERVICE_NAME) (Если уже был квалификатор @Named(SERVICE_NAME_PROPERTY)
        то вместо него)\n * String nodeName и добавляем квалификатор @Named(NODE_NAME)
        (Если уже был квалификатор @Named(NODE_NAME_PROPERTY) то вместо него)\n *
        String datacenter и добавляем квалификатор @Named(DATACENTER) (Если уже был
        квалификатор @Named(DATACENTER_NAME_PROPERTY) то вместо него)\n * Properties
        hibernateProperties и добавляем квалификатор @Hibernate\n * Properties serviceProperties
        и добавляем квалификатор @Service\n * PropertiesFactoryBean serviceProperties
        и добавляем квалификатор @Service\n\n * https://github.com/hhru/java-service-common-config/pull/38/files\n
        * https://github.com/hhru/deploy-dev-secure/pull/2982/files
    compatible: false

-   name: 4.32.1
    date: '2021-12-24T11:55:00.000000+03:00'
    description: Добавились метрики maxThreads для MonitoredQueuedThreadPool и maxSize
        для MonitoredThreadPoolExecutor
    instructions: ''
    compatible: true

-   name: 4.32.0
    date: '2021-12-09T15:45:00.000000+03:00'
    description: Изменение сигнатуры MDC#generateRequestId
    instructions: Метод теперь не принимает параметров. Если вам нужно передавать
        свой кастомный постфикс, используйте библиотеку для генерации rid из hh-java-libs
        - RequestIdGenerator#makeRequestId(String origin).
    compatible: false

-   name: 4.31.0
    date: '2021-11-19T17:47:00.000000+03:00'
    description: Переезд с embedded postgres на testcontainers для юнит-тестов
    instructions: Может понадобиться поменять jdbc-урл в тестовых настройках.\nhttps://github.com/hhru/hh.ru/pull/9469/files
    compatible: false

-   name: 4.30.13
    date: '2021-09-28T14:06:00.000000+03:00'
    description: Можно использовать в конфиге consul.service.address=resolve, чтобы
        резолвить адрес инстанса из OS
    instructions: ''
    compatible: true

-   name: 4.30.0
    date: '2021-04-20T15:52:00.000000+03:00'
    description: Изменилось название метрики про обработку кафка-батчей
    instructions: '* было batchProcessingTimeMs, стало batchProcessingTime. Нужно
        обновить графики в мониторинге, если она использовалась.\n* Изменилось название
        property для кафки: было *.nab_setting.pool.timeout.ms, стало *.nab_setting.poll.timeout.ms,
        так что надо будет поправить конфиги. И проверка имён кафка propert''ей стала
        чуть строже.'
    compatible: false

-   name: 4.29.11
    date: '2021-04-09T12:39:00.000000+03:00'
    description: В MarshallerContextResolver заменена коллекция, используемая в качестве
        кэша. Добавлена настройка количества хранимых STRONG ссылок с дефолтом и метрики
        про переполнение кэша.
    instructions: ''
    compatible: true

-   name: 4.29.1
    date: '2021-02-15T18:47:00.000000+03:00'
    description: Замена orbits consul клиента на форк ru.hh.Consul
    instructions: Нужно только если по каким-то причинам, манипулировали с бином Consul'а
        в сервисе. Замена пакетов com.orbitz -> на ru.hh\n https://github.com/hhru/hh-session/pull/457/files
    compatible: false

-   name: 4.28.11
    date: '2021-02-10T13:09:00.000000+03:00'
    description: Остановка kvCache перед де-регистрацией в консуле
    instructions: ''
    compatible: true

-   name: 4.28.6
    date: '2021-01-28T18:22:00.000000+03:00'
    description: Даунгрейд версии sentry
    instructions: ''
    compatible: true

-   name: 4.28.5
    date: '2021-01-21T14:47:00.000000+03:00'
    description: Фикс тестов консула
    instructions: ''
    compatible: true

-   name: 4.28.3
    date: '2021-01-18T17:59:00.000000+03:00'
    description: DependencyManagement и возможность полного отключения консула
    instructions: https://github.com/hhru/hh.ru/pull/8288/files\n https://github.com/hhru/deploy-dev/pull/3644/files\n
        https://github.com/hhru/deploy-dev-secure/pull/2018/files
    compatible: false

-   name: 4.28.0
    date: '2020-12-21T15:03:00.000000+03:00'
    description: DependencyManagement и возможность полного отключения консула
    instructions: ''
    compatible: true

-   name: 4.27.13
    date: '2020-12-16T18:43:00.000000+03:00'
    description: Переписаны настройки логирования для тестов с xml на Configurator
    instructions: Если вы не добавите конфигуратор в META-INF тестов, то сработает
        конфигуратор из проекта, с сопутствующими ресурсами\n https://github.com/hhru/hh.ru/pull/8218/files
    compatible: false

-   name: 4.27.12
    date: '2020-12-10T11:59:00.000000+03:00'
    description: Пишем userAgent в requests.slog
    instructions: ''
    compatible: true

-   name: 4.27.11
    date: '2020-12-07T12:55:00.000000+03:00'
    description: Добавлен junit5 extention для fail fast остановки тестов, если не
        стартует spring context
    instructions: ''
    compatible: true

-   name: 4.27.10
    date: '2020-12-04T13:18:00.000000+03:00'
    description: Фикс ExceptionMapper'а
    instructions: ''
    compatible: true

-   name: 4.27.8
    date: '2020-11-27T16:22:00.000000+03:00'
    description: Динамическая перерегистрация веса
    instructions: В service.properties становится обязательным nodeName\n https://github.com/hhru/hh-session/pull/444/files\n
        https://github.com/hhru/deploy-dev/pull/3482/files\n https://github.com/hhru/deploy-dev-secure/pull/1924
    compatible: false

-   name: 4.27.6
    date: '2020-11-19T18:40:00.000000+03:00'
    description: hibernate обновлен до 5.4.21
    instructions: ''
    compatible: true

-   name: 4.27.5
    date: '2020-11-19T11:59:00.000000+03:00'
    description: Фикс shutdown hook'а
    instructions: ''
    compatible: true

-   name: 4.27.4
    date: '2020-11-16T12:18:00.000000+03:00'
    description: Реализована логика отката локального оффсета кафки
    instructions: Могут понадобится изменения в коде потребителя данных из кафки в
        реализации интерфейса ru.hh.nab.kafka.consumer.ConsumeStrategy\n \https://github.com/hhru/resume-search/pull/102/files
    compatible: false

-   name: 4.27.3
    date: '2020-11-03T16:45:00.000000+03:00'
    description: Добавлен листенер, который пишет данные прогона юнит тестов на стенде
        в базу
    instructions: Для подключения профилирования необходимо добавить расширение в
        папку .mvn.\n Для подключения листенера юнит тестов нужно в папку test/resources/META_INF/services/
        добавить файл с именем org.junit.platform.launcher.TestExecutionListener,
        в котором написать reference к listener -ru.hh.nab.testbase.listeners.TestExecutorListener\n
        Пример подключения к проекту:\n https://github.com/hhru/hh.ru/compare/HH-118582
    compatible: false

-   name: 4.27.1
    date: '2020-10-29T18:11:00.000000+03:00'
    description: Изменены метрики по БД
    instructions: 'Изменений в коде сервиса не требуется, только в мониторинге.\n
        Было: name="service_name.datasource_type.connection.creation_ms"\n Стало:
        name="jdbc_pool.connection.creation_ms", datasource="datasource_type", app="service_name"\n
        Имя сервиса и тип БД (slow, readonly, etc) перенесены в тэги\n https://github.com/hhru/hh-dictionaries/pull/32/files'
    compatible: false

-   name: 4.26.7
    date: '2020-10-15T16:54:00.000000+03:00'
    description: Добавление новых параметров при регистрации
    instructions: ''
    compatible: true

-   name: 4.26.4
    date: '2020-10-13T18:21:00.000000+03:00'
    description: Обновление parent pom
    instructions: ''
    compatible: true

-   name: 4.26.4
    date: '2020-10-13T18:21:00.000000+03:00'
    description: Обновление parent pom
    instructions: ''
    compatible: true

-   name: 4.26.1
    date: '2020-09-08T12:11:00.000000+03:00'
    description: Замена клиента консула с Ecwid на rickfast
    instructions: ''
    compatible: true

-   name: 4.26.0
    date: '2020-08-18T14:37:00.000000+03:00'
    description: Удалён старый механизм оверрайда логов через конфиги
    instructions: ''
    compatible: true

-   name: 4.25.13
    date: '2020-08-12T19:22:00.000000+03:00'
    description: NaB добавляет в Consul специальный tag если в Spring контексте присутствует
        LogLevelOverrideExtension
    instructions: ''
    compatible: true

-   name: 4.25.12
    date: '2020-08-10T12:15:00.000000+03:00'
    description: Добавлена настройка logLevelOverrideExtension.updateIntervalInMinutes
    instructions: ''
    compatible: true

-   name: 4.25.10
    date: '2020-08-03T15:33:00.000000+03:00'
    description: Добавлены метрики fetch-size-avg, records-per-request-avgдля для
        kafka консюмера
    instructions: ''
    compatible: true

-   name: 4.25.8
    date: '2020-07-27T19:49:00.000000+03:00'
    description: Добавился LogLevelOverrideExtension
    instructions: NabApplication.configureLogger() больше не публичный. Скорее всего
        его использования можно удалить, т.к. метод и так вызывается внутри nabApplication.run().
    compatible: false

-   name: 4.25.6
    date: '2020-07-02T17:11:00.000000+03:00'
    description: Не стартуем консюмер кафки, если прописаны некорректные названия
        настроек
    instructions: 'Некорректные - это которые:\n* не содержат подстроки nab_setting
        и не прописаны в org.apache.kafka.clients.consumer.ConsumerConfig#configNames\n
        * для конкретного топика не соответствуют шаблону <kafkaCluster>.consumer.topic.<topicName>.default\n
        Пример: https://github.com/hhru/hh-events-enricher/pull/14'
    compatible: false

-   name: 4.25.5
    date: '2020-06-25T20:24:00.000000+03:00'
    description: Добавлен ThreadDiagnosticRejectedExecutionHandler
    instructions: ''
    compatible: true

-   name: 4.25.4
    date: '2020-06-25T20:00:00.000000+03:00'
    description: Добавлен ThreadDiagnosticRejectedExecutionHandler (неудачный деплой)
    instructions: Неудачный деплой, обновляйтесь сразу на 4.25.5
    compatible: false

-   name: 4.25.3
    date: '2020-06-17T16:24:00.000000+03:00'
    description: Возможность стартовать jetty в тестах раньше, чем приложение
    instructions: Несовместимая версия с nab-testbase-old. Если он используется лучше
        сразу обновляться на 4.25.5+
    compatible: false

-   name: 4.25.1
    date: '2020-05-24T17:40:00.000000+03:00'
    description: Убран дефолт из ExecuteOnDataSource
    instructions: Нужно добавить в использования аннотации @ExecuteOnDataSource параметр
        dataSourceType = DataSourceType.READONLY, где его нет.
    compatible: false

-   name: 4.25.0
    date: '2020-05-23T23:26:00.000000+03:00'
    description: Убран дефолт из ExecuteOnDataSource (неудачный деплой)
    instructions: Неудачный деплой, обновляйтесь сразу на 4.25.1
    compatible: false

-   name: 4.24.4
    date: '2020-05-20T17:30:00.000000+03:00'
    description: Fail-fast настройки для кафки
    instructions: ''
    compatible: true

-   name: 4.24.0
    date: '2020-05-11T17:40:00.000000+03:00'
    description: Переход на JUnit-5
    instructions: https://junit.org/junit5/docs/current/user-guide/#migrating-from-junit4\n
        Если нет желания обновляться на новый junit то можно при обновлении использовать
        модуль nab-testbase-old
    compatible: false

-   name: 4.22.22
    date: '2020-01-28T16:21:00.000000+03:00'
    description: Обновление Jetty
    instructions: https://github.com/hhru/hh.ru/pull/6852/files\n https://github.com/hhru/hhid/pull/562
    compatible: false

-   name: 4.22.5
    date: '2019-10-24T14:54:00.000000+03:00'
    description: Обновление JClient
    instructions: https://github.com/hhru/jlogic/pull/627/files\n \https://github.com/hhru/deploy-dev/pull/2248/files
    compatible: false

-   name: 4.22.1
    date: '2019-10-11T17:53:00.000000+03:00'
    description: Асинхронные фильтры
    instructions: https://github.com/hhru/hhid/pull/546/files + https://github.com/hhru/hhid/pull/548\n
        https://github.com/hhru/deploy-dev/pull/2199/files  (больше нет необходимости
        заводить переменную и выключать Consul в тестовом окружении)\n https://github.com/hhru/deploy-dev-secure/pull/1181
        (больше нет необходимости заводить переменную и выключать Consul в тестовом
        окружении)
    compatible: false

-   name: 4.21.3
    date: '2019-10-08T13:23:00.000000+03:00'
    description: Default context
    instructions: ''
    compatible: true

-   name: 4.21.0
    date: '2019-10-02T15:48:00.000000+03:00'
    description: Трекинг таймаутов
    instructions: https://github.com/hhru/resume-search/pull/35/files\n \https://github.com/hhru/jlogic/pull/616/files
    compatible: false

-   name: 4.20.6
    date: '2019-09-25T16:12:00.000000+03:00'
    description: TransactionalScope + depricate DataSourceContext.executeOn
    instructions: ''
    compatible: true

-   name: 4.20.4
    date: '2019-08-23T14:45:00.000000+03:00'
    description: Readonly Hicari CP теперь будет использовать не readonly коннекшены
    instructions: ''
    compatible: true

-   name: 4.20.2
    date: '2019-08-08T14:08:00.000000+03:00'
    description: Обновление Jackson'а
    instructions: ''
    compatible: true

-   name: 4.20.1
    date: '2019-07-30T18:46:00.000000+03:00'
    description: Изменение syslog ident для json логов
    instructions: https://github.com/hhru/deploy-dev/pull/2039/files
    compatible: false

-   name: 4.19.11
    date: '2019-06-11T16:03:00.000000+03:00'
    description: Logback java config, mx4j removing, nab-jclient, nab-metrics, jclient-utils
        removing
    instructions: https://github.com/hhru/mobile-notifier/pull/136/files\n https://github.com/hhru/deploy-dev/pull/1910/files\n
        https://github.com/hhru/deploy-dev-secure/pull/1040/files
    compatible: false

-   name: 4.8.1
    date: '2018-11-26T14:35:00.000000+03:00'
    description: HikariCP
    instructions: https://github.com/hhru/hh-dictionaries/pull/5/files\n \https://github.com/hhru/deploy-dev/commit/659d725859e99eea611d25cc1cfda9cbcc8e990b\n
        https://github.com/hhru/deploy-dev-secure/commit/7a850ac245c3ec869d223e43ebc9833f929266f2
    compatible: false

-   name: 4.7.2
    date: '2018-11-15T16:53:00.000000+03:00'
    description: Jetty порт доступен до старта
    instructions: https://github.com/hhru/mobile-notifier/pull/120/files
    compatible: false

